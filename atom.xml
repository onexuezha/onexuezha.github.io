<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>XueZha</title>
  
  <subtitle>择一事终一生,不为繁华易匠心</subtitle>
  <link href="https://onexuezha.github.io/atom.xml" rel="self"/>
  
  <link href="https://onexuezha.github.io/"/>
  <updated>2022-02-02T14:15:06.579Z</updated>
  <id>https://onexuezha.github.io/</id>
  
  <author>
    <name>XueZha</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>text</title>
    <link href="https://onexuezha.github.io/post/3b8ba7c7.html"/>
    <id>https://onexuezha.github.io/post/3b8ba7c7.html</id>
    <published>2022-02-02T14:09:07.000Z</published>
    <updated>2022-02-02T14:15:06.579Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2022/02/02/CWEoxfLNs48Vjyq.jpg" alt="123"></p><p><img src="https://npm.elemecdn.com/onexuezha_img@1.0.27/%E7%AB%99%E7%82%B9/xuezha.webp"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2022/02/02/CWEoxfLNs48Vjyq.jpg&quot; alt=&quot;123&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://npm.elemecdn.com/onexuezha_img@1.0.27/%</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>旧手机不要丢！拿来当副屏多爽！</title>
    <link href="https://onexuezha.github.io/post/a9033469.html"/>
    <id>https://onexuezha.github.io/post/a9033469.html</id>
    <published>2022-01-27T12:13:11.000Z</published>
    <updated>2022-01-28T03:06:03.754Z</updated>
    
    <content type="html"><![CDATA[<details class="folding-tag" ><summary> 参考 </summary>              <div class='content'>              <table><thead><tr><th align="center">来源</th><th align="center">作者</th><th align="center">参考部分</th></tr></thead><tbody><tr><td align="center"><a href="https://www.bilibili.com/video/BV1xm4y1S7Nc?spm_id_from=333.1007.top_right_bar_window_history.content.click">b站视频</a></td><td align="center"><a href="https://space.bilibili.com/251013709">晨钟酱Official</a></td><td align="center">没参考啥，只是知道了这个软件，操作什么都是自己摸索的</td></tr><tr><td align="center"><a href="https://www.spacedesk.net/">官网</a></td><td align="center">官方</td><td align="center">注意与特别注意翻译自官网</td></tr><tr><td align="center"><a href="https://www.zhihu.com/question/56120869">知乎回答</a></td><td align="center"><a href="https://www.zhihu.com/people/wen-ming-ren-65">再见一面</a></td><td align="center">参考部分关于苹果开热点给电脑连接</td></tr></tbody></table>              </div>            </details><p>前几天在b站上看到一个挺好玩的软件——spacedesk</p><p>简单来说就是可以把你不要的旧手机，平板当做电脑的副屏，我一般就是挂一点资料看或者一边敲代码，一边看b站，甚至还支持平板触屏操作</p><div class="tip warning"><p>注意</p><p>电脑和手机/平板必须处于同一局域网内</p><p>对自己网速要有了解，如果过慢会导致延迟极高影响体验</p><p>只支持win8~win10（官方说win8的程序可以安装在win7上，但后果自负）</p></div><div class="tip ban"><p>特别注意</p><p>splashtop 有线 XDisplay 的虚拟显示驱动程序需要卸载（它是一个不兼容的旧旧 WDDM Filter Hook 驱动程序，即使它似乎不再使用这个旧驱动程序，也不能与 spacedesk 等其他类似产品共存）。<br>在 Splashtop Wired XDisplay Agent 窗口 -&gt; 高级，只需卸载 Virtual Display 驱动程序。</p><p> NVIDIA 显卡驱动程序需要更新到版本 461.09（发布日期：2021.1.7），然后再与 spacedesk 一起使用！<br>较旧的 NVIDIA 图形驱动程序可能会使 Windows 10 PC 因 BSOD（蓝屏死机）而崩溃。</p></div><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><h2 id="安装所需软件"><a href="#安装所需软件" class="headerlink" title="安装所需软件"></a>安装所需软件</h2><div class="tip "><p>电脑支持win10，win8（要用win7的请看上方黄色注意块）</p><p>手机支持苹果，安卓</p></div><p>安装电脑所需软件：打开<a href="https://www.spacedesk.net/">官网</a>或我提供的<a href="http://148.100.109.60:5244/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/spacedesk_driver_Win_10_64_v1031_BETA.msi">链接</a>进行下载（我只提供win10），下载好了你会得到一个后缀为msi文件，双击安装即可</p><p>安装手机所需软件：打开手机/平板的应用商城，搜索spacedesk（logo为下图别下错了！）下载安装即可</p><p><img src="https://npm.elemecdn.com/onexuezha_img2@1.0.30/%E5%A4%9A%E5%BC%A0%E5%9B%BE%E7%89%87/%E5%89%AF%E5%B1%8F/fp_1.webp" alt="fp_1"></p><h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><p>打开手机/平板，可以看到电脑的图标，点击连接即可（没有的请确定电脑软件是否开启）</p><p><img src="https://pic4.zhimg.com/80/v2-76acdeca1a9307da03aa6a82f51d90ef_720w.jpg" alt="img"></p><p>这时，手机/平板将会显示出一样的画面，别急，在桌面<span class='p blue'>右键</span>–&gt;找到并点击<span class='p blue'>显示</span>–&gt;下滑找到<span class='p blue'>多显示器设置</span>–&gt;将<span class='p blue'>复制这些显示屏</span>改为<span class='p blue'>扩展这些显示屏</span>，这样你的手机/平板就成为电脑副屏了！如果想改变副屏位置，上滑看到下图</p><p><img src="https://pic2.zhimg.com/80/v2-4d5faffab14b6927eb3a94c210610dd5_720w.jpg" alt="img"></p><p>可以随意拖动显示屏的位置</p><h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><p>默认设置你或许觉得不满意这里我给出两种方案，分别是想画质好，想流畅</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">通用</button></li><li class="tab"><button type="button" data-href="#test4-2">画质好</button></li><li class="tab"><button type="button" data-href="#test4-3">流畅</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><h1 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h1><p>将手机用usb连电脑，在手机上开启usb网络共享，这样手机和电脑就在一个有线的局域网中，然后再正常使用 Spacedesk 即可。</p><p>如果使用usb3.0接口，带宽能高达5gbps，如果使用usb3.1接口，带宽能高达10gbps，延迟和WiFi相比又会好一些</p><blockquote><p>注意：此时电脑可能通过手机上网，你需要在手机上开启 WIFI，来避免手机流量被电脑耗尽。</p></blockquote><h1 id="苹果"><a href="#苹果" class="headerlink" title="苹果"></a>苹果</h1><div class="tip warning"><p>注意</p><p>1.因为我电脑连了网线速度嗖嗖的，完全不需要优化，所以这种方法我并没有尝试过，我在百度也没搜到有这种方法，但是根据Android的usb连接优化方法原理，想到了苹果的热点连接，不知道有效没，大家在卡到没办法的时候用</p></div><blockquote><p>先下载一个iTunes（可以百度上下载也可以应用商店下载）安装过程过于简单，故不做演示</p><p>下载了iTunes后，打开iTunes，如果手机端已经打开个人热点（仅USB），但电脑还没有网络，请打开设备管理器，寻找里面的其他设备（或便携设备），会发现里面有一个iPhone设备，右键，选择“更新驱动程序”。（如果驱动不能正常安装①安装驱动需要网络，先用手机WiFi开热点让电脑连接网络进行驱动安装②可以看一下电脑的Windows update服务是否开启）</p><p>不出意外的话，电脑已经可以上网了，如果还没有网络，尝试重新打开热点开关，插拔数据线，重启电脑等  </p></blockquote><p>这是我在知乎上找的一个答案（来源请看最顶上的参考）按照指示操作即可</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p>点击手机/平板的设置（左下角的图标）–&gt;点击settings–&gt;点击底栏quality/performance（顺数第三个）–&gt;将image quality拉到满–&gt;再将color depth调整为high color quality,slow speed(yuv4.4.4)–&gt;最后将custom FPS rate调整为60FPS</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p>点击手机/平板的设置（左下角的图标）–&gt;点击settings–&gt;点击底栏quality/performance（顺数第三个）–&gt;将image quality拉到最低–&gt;再将color depth调整为low color quality,slow speed(yuv4.2.0)–&gt;最后将custom FPS rate调整为60FPS或30FPS（推荐两个都试一下，这里的custom fps rate是屏幕刷新率）</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;details class=&quot;folding-tag&quot; &gt;&lt;summary&gt; 参考 &lt;/summary&gt;
              &lt;div class=&#39;content&#39;&gt;
              &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>如何白嫖一个资源下载站？</title>
    <link href="https://onexuezha.github.io/post/67d4749d.html"/>
    <id>https://onexuezha.github.io/post/67d4749d.html</id>
    <published>2022-01-24T03:22:15.000Z</published>
    <updated>2022-01-28T03:05:54.232Z</updated>
    
    <content type="html"><![CDATA[<h1 id="注意：必须有一台服务器-（Ubuntu系统更好）不用性能多好磁盘5g足够"><a href="#注意：必须有一台服务器-（Ubuntu系统更好）不用性能多好磁盘5g足够" class="headerlink" title="注意：必须有一台服务器 （Ubuntu系统更好）不用性能多好磁盘5g足够"></a>注意：必须有一台服务器 （Ubuntu系统更好）不用性能多好磁盘5g足够</h1><p> 博客中有时难免有些资源需要提供下载链接，像我就有专门的<a href="http://148.100.109.60:5244/">资源分享网站</a>虽说是个分享网站，但它还可以备份文件的作用，例如上次我磁盘被清空（<a href="https://onexuezha.vercel.app/post/40b88bbc.html">详情戳我</a>）自己装机的软件就没了，还得去别人的网站下，超麻烦</p><p>所以</p><p>我需要一款</p><ul><li>免费</li><li>不限速</li><li>容量大</li><li>直链下载</li><li>不需要担心文件丢失</li><li>不需要担心流量不够</li></ul><p>在我的一番寻找下，还真给我找着了！</p><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>打开<a href="https://alist-doc.nn.ci/">alist官方文档</a></p><details class="folding-tag" ><summary> alist简介 </summary>              <div class='content'>              <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p><a href="https://github.com/Xhofe/alist/releases/latest"><img src="https://img.shields.io/github/release/Xhofe/alist?style=flat-square" alt="img"></a> <a href="https://github.com/Xhofe/alist/discussions"><img src="https://img.shields.io/github/discussions/Xhofe/alist?color=%23ED8936&style=flat-square" alt="GitHub Discussions"></a> <a href="https://github.com/Xhofe/alist/actions?query=workflow:Build"><img src="https://img.shields.io/github/workflow/status/Xhofe/alist/build?style=flat-square" alt="img"></a> <a href="https://github.com/Xhofe/alist/releases"><img src="https://img.shields.io/github/downloads/Xhofe/alist/total?style=flat-square&color=%239F7AEA" alt="img"></a> <a href="https://www.jsdelivr.com/package/gh/Xhofe/alist-web"><img src="https://img.shields.io/jsdelivr/gh/hm/Xhofe/alist-web?style=flat-square" alt="img"></a> <a href="https://pay.xhofe.top/"><img src="https://img.shields.io/badge/%24-donate-ff69b4.svg?style=flat-square" alt="img"></a></p><h3 id="是什么？"><a href="#是什么？" class="headerlink" title="是什么？"></a>是什么？</h3><p>一款支持多种存储的目录文件列表程序，支持 web 浏览与 webdav，后端基于<code>gin</code>，前端使用<code>react</code>。</p><h2 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h2><p>一般问题请到<a href="https://github.com/Xhofe/alist/discussions">讨论论坛</a> ，<strong>issue 仅针对错误报告。</strong></p><h3 id="支持的存储"><a href="#支持的存储" class="headerlink" title="支持的存储"></a>支持的存储</h3><ul><li> 本地存储</li><li> <a href="https://www.aliyundrive.com/">阿里云盘</a></li><li> OneDrive / Sharepoint（<a href="https://www.office.com/">国际版</a>, <a href="https://portal.partner.microsoftonline.cn/">世纪互联</a>,de,us）</li><li> <a href="https://cloud.189.cn/">天翼云盘</a></li><li> <a href="https://drive.google.com/">GoogleDrive</a></li><li> <a href="https://www.123pan.com/">123 云盘</a></li><li> <a href="https://pc.woozooo.com/">蓝奏云</a></li><li> <a href="https://github.com/Xhofe/alist">Alist</a></li><li> FTP</li><li> <a href="https://www.mypikpak.com/">PikPak</a></li><li> <a href="https://shandianpan.com/">闪电盘</a></li><li> <a href="https://aws.amazon.com/cn/s3/">S3</a></li><li> WebDav</li><li> Teambition（<a href="https://www.teambition.com/">中国</a>，<a href="https://us.teambition.com/">国际</a>）</li><li> <a href="https://www.mediatrack.cn/">分秒帧</a></li><li> <a href="https://yun.139.com/">和彩云</a> (个人云, 家庭云)</li></ul><h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><ul><li><a href="https://alist.nn.ci(官方)/">https://alist.nn.ci（官方）</a></li><li><a href="http://148.100.109.60:5244（我的）">http://148.100.109.60:5244（我的）</a></li></ul>              </div>            </details><p>按照官网的指示，在控制台输入好命令安装，支持大量的服务器架构（就连我ibm的s390x架构都支持）</p><p>安装好后，你需要选择储存方法（参见上方简介中的）我的建议是用123网盘，为什么，2t免费储存啊！！！换谁不心动！！！</p><p>按照官方文档你就应该开始配置123盘了，注意其中的<strong>代理</strong>，<strong>webdav proxy</strong>除非特殊情况不要开启，不然服务器在国外速度会不理想，具体原因请看官方文档</p><p>最后提个意见，上传，重命名，等操作在网盘中完成更好，不要到alist首页操作，容易出bug且速度较慢（反正别用）</p><p>如果遇到bug就去官方论坛反馈（作者回复超快！！！）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;注意：必须有一台服务器-（Ubuntu系统更好）不用性能多好磁盘5g足够&quot;&gt;&lt;a href=&quot;#注意：必须有一台服务器-（Ubuntu系统更好）不用性能多好磁盘5g足够&quot; class=&quot;headerlink&quot; title=&quot;注意：必须有一台服务器 （Ubuntu系</summary>
      
    
    
    
    <category term="教程" scheme="https://onexuezha.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="白嫖" scheme="https://onexuezha.github.io/tags/%E7%99%BD%E5%AB%96/"/>
    
  </entry>
  
  <entry>
    <title>2021年终总结</title>
    <link href="https://onexuezha.github.io/post/a23e5172.html"/>
    <id>https://onexuezha.github.io/post/a23e5172.html</id>
    <published>2022-01-01T04:42:24.000Z</published>
    <updated>2022-02-01T09:27:56.228Z</updated>
    
    <content type="html"><![CDATA[<p> 不知不觉，2021已经过去</p><p>在这一年里，我的收获说小不小，说大不大</p><p>我遇见了很多朋友</p><p>同时</p><p>我也遇到了无数个bug，至今记忆犹新</p><p>其实，早在我初一时就开始搭建博客了，那时的我对前端基本空白，自己也不想靠别人也就没加蝴蝶主题qq群，一个人每天对着电脑敲代码，改bug。</p><p>可惜当时的忘记装一个插件导致无数次失败，但我又住校周六周日才有空去搞博客。最后还是放弃了</p><p>暑假来了，我又尝试搭建博客，但这次不同，我学了HTML与css，过程仍然艰辛，常常是一个bug改好了，另一个bug出来了，改也改不完，再一次放弃。当然不是说暑假就只搭建了博客，我还另外学了Unity开发了一款超多bug的游戏（反正干啥都会遇见bug）</p><p>步入初二的大门，我依然没有放弃，每天都在和bug做斗争，尽管每次都是我输</p><p>直到——2021.9.3</p><p>初二，不住校了，在上完晚自习后就萌生了搞Linux的想法，间接接触了vm虚拟机，也知道了快照的概念，按理说我应该会把精力方式到Ubuntu上，但事实并非如此，当我知道vm虚拟机的快照功能后，立马想到了可以用来搭建hexo，很庆幸，这是个正确的选择。后面就开始用快照功能一点一点搭建博客（以下是我保存的快照）<img src="https://npm.elemecdn.com/onexuezha_article_img1@1.0.4/2021%E5%B9%B4%E6%80%BB%E6%80%BB%E7%BB%93/2021_1.webp"></p><p>然而</p><p>bug并没有离开我，后面建着建着发现很多奇葩的bug，比如代码复制用不了，无论点击哪个文章都跳转到同一个文章，等我解决了这些bug，又发现index.css加载不了，整个页面只有HTML</p><p>因此</p><p>我又把博客想方设法地转到了物理机上，最后成了，也一直用到了今天</p><p>遇到了这么多bug，我觉得还是蛮值得，在这么多bug中我总结了很多经验，养成了许多好习惯，更为重要的是我获得了比别人更扎实的基础，这在将来对我一定会有很大的帮助！</p><p>博客具体从什么时候搭建已经无可追寻了，但大概是2020.4~2020.6这一段时间，说来惭愧，一个搞了1年多的博客到现在却只有几篇文章。</p><p>诚然，我的博客已经建好了，但是我的文笔，技术仍然有欠缺，如果你觉得本站有任何的缺点请在<a href="https://onexuezha.github.io/feedback/index.html">反馈</a>页面提出</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; 不知不觉，2021已经过去&lt;/p&gt;
&lt;p&gt;在这一年里，我的收获说小不小，说大不大&lt;/p&gt;
&lt;p&gt;我遇见了很多朋友&lt;/p&gt;
&lt;p&gt;同时&lt;/p&gt;
&lt;p&gt;我也遇到了无数个bug，至今记忆犹新&lt;/p&gt;
&lt;p&gt;其实，早在我初一时就开始搭建博客了，那时的我对前端基本空白，自己也不想靠</summary>
      
    
    
    
    <category term="总结" scheme="https://onexuezha.github.io/categories/%E6%80%BB%E7%BB%93/"/>
    
    
  </entry>
  
  <entry>
    <title>基于Butterfly的深度优化</title>
    <link href="https://onexuezha.github.io/post/e14dadae.html"/>
    <id>https://onexuezha.github.io/post/e14dadae.html</id>
    <published>2021-12-11T07:25:12.000Z</published>
    <updated>2022-01-28T03:06:06.727Z</updated>
    
    <content type="html"><![CDATA[<details class="folding-tag" ><summary> 更新记录 </summary>              <div class='content'>              <p>在2022.1jsd出了一些事，导致速度大不如前（甚至起到反效果）所以将jsd加速换为npm+饿了么加速</p>              </div>            </details><details class="folding-tag" ><summary> 参考教程 </summary>              <div class='content'>              <p><a href="https://akilar.top/posts/7c16c4bb/">糖果屋优化访问日记</a>里面的部分内容（写的很详细，推荐去看）</p>              </div>            </details><details class="folding-tag" ><summary> 摘要 </summary>              <div class='content'>              <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>1、npm+饿了么网宿</p><blockquote><p>更换jsd</p></blockquote><p>2、图片压缩</p><blockquote><p>压缩图片工作流 </p></blockquote><p>3、Gulp 压缩全站静态资源</p><blockquote><p>gulp的优缺点，并将其安装使用</p></blockquote><p>4、合并css</p><blockquote><p>合并css的方式</p></blockquote><p>5、手机端优化</p><blockquote><p>通过css进行优化</p></blockquote><p>6、镜像站支持</p><blockquote><p>verce，gitee，conding</p></blockquote><p>7、PWA</p><blockquote><p>糖果屋的教程</p></blockquote><p>8、杂项</p><blockquote><p>调整主题配置</p></blockquote><p>8.1、instantpage（预加载）<br>8.2、默认图片更改<br>8.3、Pangu(文字格式优化)<br>8.4、pjax</p>              </div>            </details><h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="CDN-加速（已失效）"><a href="#CDN-加速（已失效）" class="headerlink" title="CDN 加速（已失效）"></a>CDN 加速（已失效）</h2><p>butterflu默认的一些文件不会用jd加速所以请自行更改</p><h2 id="2021-1-26更新：npm-饿了么网宿"><a href="#2021-1-26更新：npm-饿了么网宿" class="headerlink" title="2021.1.26更新：npm+饿了么网宿"></a>2021.1.26更新：npm+饿了么网宿</h2><p>其实把npm当图床也不错（就是麻烦一点）可npm每一个包好像有大小限制，但你可以无限创建npm包啊，那不就等于无限储存空间吗</p><p>首先你需要知道如何创建一个npm包并使用饿了么网宿加速，在这方面已经有很完善的教程了，请移步至<a href="https://akilar.top/posts/3e956346/">npm图床的使用技巧</a>学习</p><p>接下来的教程请确保你已经学会了npm图床的用法，并且能做到使用饿了么网宿加速</p><p>第一步：确定你的浏览器(我用的是谷歌浏览器，但推荐火狐)</p><p>第二部：打开你的博客并按下F12打开控制台，找到”网络“点击，它会让你重新刷新一次，刷新后，你可以看到每一个文件加载的顺序以及大小，速度等等</p><p>第三步：在里面找速度很慢的加载项文件，双击，就可以看到具体的属性，复制它的文件名</p><p>第四步：去butterflu配置文件中搜索你刚刚复制的文件名，找到相应的源，复制在浏览器打开，一会看到一堆乱七八糟的玩意，不管ctrl+a全选ctrl+c复制</p><p>第五步：新建一个npm包，根据被复制文件的后缀新建一个相同名称的文件，并将刚刚复制的内容粘贴进去即可，重复以上步骤把所有推延加载速度的文件换成npm+饿了么网宿加速</p><p>如果实在看不懂，我的qq：3378216360（不收费）或者F12查看我的文件源</p><h2 id="图片压缩"><a href="#图片压缩" class="headerlink" title="图片压缩"></a>图片压缩</h2><p>用<a href="https://github.com/meowtec/Imagine"><strong>imagine</strong></a>进行有损压缩后，再用<a href="http://www.pcfreetime.com/">格式工厂</a>转换为web格式</p><p><strong>2022.1.26更新，不需要imagine压缩，直接用格式工厂转web即可！</strong></p><h2 id="Gulp-压缩全站静态资源"><a href="#Gulp-压缩全站静态资源" class="headerlink" title="Gulp 压缩全站静态资源"></a>Gulp 压缩全站静态资源</h2><blockquote><p><a href="https://www.gulpjs.com.cn/">gulp</a> 能够帮助用户自动压缩静态资源，配合各类下属插件，能够压缩包括 css、js、html 乃至各类格式的图片文件。（图片文件的压缩效果远远不如上文提到的压缩方法，所以此处不再写使用 gulp 压缩图片的内容）</p></blockquote><p>安装 Gulp 插件：在博客根目录 [Blogroot] 打开终端，输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --global gulp-cli <span class="comment">#全局安装gulp指令集</span></span><br><span class="line">npm install gulp --save <span class="comment">#安装gulp插件</span></span><br></pre></td></tr></table></figure><p>安装各个下属插件以实现对各类静态资源的压缩。<br>压缩 HTML：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-htmlclean --save-dev</span><br><span class="line">npm install gulp-html-minifier-terser --save-dev</span><br><span class="line"><span class="comment"># 用gulp-html-minifier-terser可以压缩HTML中的ES6语法</span></span><br></pre></td></tr></table></figure><p>压缩 CSS：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-clean-css --save-dev</span><br></pre></td></tr></table></figure><p>压缩JS：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp-terser --save-dev</span><br></pre></td></tr></table></figure><p>为 Gulp 创建 gulpfile.js 任务脚本。在博客根目录 [Blogroot] 下新建 gulpfile.js, 打开 [Blogroot]\gulpfile.js, 输入以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">//用到的各个插件</span><br><span class="line">var gulp = require(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line">var cleanCSS = require(<span class="string">&#x27;gulp-clean-css&#x27;</span>);</span><br><span class="line">var htmlmin = require(<span class="string">&#x27;gulp-html-minifier-terser&#x27;</span>);</span><br><span class="line">var htmlclean = require(<span class="string">&#x27;gulp-htmlclean&#x27;</span>);</span><br><span class="line">// gulp-tester</span><br><span class="line">var terser = require(<span class="string">&#x27;gulp-terser&#x27;</span>);</span><br><span class="line">// 压缩js</span><br><span class="line">gulp.task(<span class="string">&#x27;compress&#x27;</span>, () =&gt;</span><br><span class="line">  gulp.src([<span class="string">&#x27;./public/**/*.js&#x27;</span>, <span class="string">&#x27;!./public/**/*.min.js&#x27;</span>])</span><br><span class="line">    .pipe(terser())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">)</span><br><span class="line">//压缩css</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-css&#x27;</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src([<span class="string">&#x27;./public/**/*.css&#x27;</span>])</span><br><span class="line">        .pipe(cleanCSS(&#123;</span><br><span class="line">            compatibility: <span class="string">&#x27;ie11&#x27;</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line">//压缩html</span><br><span class="line">gulp.task(<span class="string">&#x27;minify-html&#x27;</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> gulp.src(<span class="string">&#x27;./public/**/*.html&#x27;</span>)</span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            removeComments: <span class="literal">true</span>, //清除html注释</span><br><span class="line">            collapseWhitespace: <span class="literal">true</span>, //压缩html</span><br><span class="line">            collapseBooleanAttributes: <span class="literal">true</span>,</span><br><span class="line">            //省略布尔属性的值，例如：&lt;input checked=<span class="string">&quot;true&quot;</span>/&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">            removeEmptyAttributes: <span class="literal">true</span>,</span><br><span class="line">            //删除所有空格作属性值，例如：&lt;input id=<span class="string">&quot;&quot;</span> /&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">            removeScriptTypeAttributes: <span class="literal">true</span>,</span><br><span class="line">            //删除&lt;script&gt;的<span class="built_in">type</span>=<span class="string">&quot;text/javascript&quot;</span></span><br><span class="line">            removeStyleLinkTypeAttributes: <span class="literal">true</span>,</span><br><span class="line">            //删除&lt;style&gt;和&lt;link&gt;的 <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span></span><br><span class="line">            minifyJS: <span class="literal">true</span>, //压缩页面 JS</span><br><span class="line">            minifyCSS: <span class="literal">true</span>, //压缩页面 CSS</span><br><span class="line">            minifyURLs: <span class="literal">true</span>  //压缩页面URL</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">&#x27;./public&#x27;</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 运行gulp命令时依次执行以下任务</span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, gulp.parallel(</span><br><span class="line">  <span class="string">&#x27;compress&#x27;</span>, <span class="string">&#x27;minify-css&#x27;</span>, <span class="string">&#x27;minify-html&#x27;</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure><p>运行如下指令即可实现压缩上传</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; gulp &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><h2 id="合并CSS"><a href="#合并CSS" class="headerlink" title="合并CSS"></a>合并CSS</h2><p><strong>注意</strong>：<strong>并不推荐这种方法，你还不如少减少魔改的css来的直接</strong></p><blockquote><p>将魔改样式整合到 index.css 文件内，减少对服务器的请求次数。</p></blockquote><p>在 [Blogroot]\themes\butterfly\source\css\ 路径下新建_custom 文件夹，然后把魔改样式的 CSS 文件拖动进去。文件目录层级可以表示为以下情况：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span></span><br><span class="line">  |__ css</span><br><span class="line">     |__ _custom</span><br><span class="line">        |__ custom1.css</span><br><span class="line">        |__ custom2.css</span><br><span class="line">        |__ custom3.css</span><br><span class="line">     |__ index.styl</span><br></pre></td></tr></table></figure><p>在 [[Blogroot]\themes\butterfly\source\css\index.styl 中新增一行代码:@import ‘_custom/你的css文件名.css’,如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> hexo-config(<span class="string">&#x27;css_prefix&#x27;</span>)</span><br><span class="line">  @import <span class="string">&#x27;nib&#x27;</span></span><br><span class="line">  @import <span class="string">&#x27;_third-party/normalize.min.css&#x27;</span></span><br><span class="line">// project</span><br><span class="line">@import <span class="string">&#x27;var&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_global/*&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_highlight/highlight&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_page/*&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_layout/*&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_tags/*&#x27;</span></span><br><span class="line">@import <span class="string">&#x27;_mode/*&#x27;</span></span><br><span class="line"></span><br><span class="line">// search</span><br><span class="line"><span class="keyword">if</span> hexo-config(<span class="string">&#x27;algolia_search.enable&#x27;</span>)</span><br><span class="line">  @import <span class="string">&#x27;_search/index&#x27;</span></span><br><span class="line">  @import <span class="string">&#x27;_search/algolia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> hexo-config(<span class="string">&#x27;local_search&#x27;</span>) &amp;&amp; hexo-config(<span class="string">&#x27;local_search.enable&#x27;</span>)</span><br><span class="line">  @import <span class="string">&#x27;_search/index&#x27;</span></span><br><span class="line">  @import <span class="string">&#x27;_search/local-search&#x27;</span></span><br><span class="line">// My css</span><br><span class="line">    @import <span class="string">&quot;_custom/custom.css&quot;</span>;</span><br></pre></td></tr></table></figure><p>其中// My css为我的css<br>如果是外链</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import <span class="string">&#x27;https://cdn.jsdelivr.net/gh/username/repo/css/example.css&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>注意：如果不生效请检查jd的缓存</strong></p><h2 id="手机端优化"><a href="#手机端优化" class="headerlink" title="手机端优化"></a>手机端优化</h2><p>请将如下css添加进你引入的css中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/*移动端优化：去除归档、标签、最新文章、公告、、只保留网站统计*/</span><br><span class="line"></span><br><span class="line">@media screen and (max-width: 800px) &#123;</span><br><span class="line">    <span class="comment">#aside_content div:not(:last-child) &#123;</span></span><br><span class="line">        display: none;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="镜像站支持"><a href="#镜像站支持" class="headerlink" title="镜像站支持"></a>镜像站支持</h2><p>目前用的人比较多的有</p><ul><li>vercel：推荐，免费，快速</li><li>gitee：不建议使用，类似GitHub，在国内访问速度快且稳定</li><li>conding：不推荐，已被腾讯收购</li></ul><p>使用方式请自行谷歌</p><h2 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2><p>糖果屋教程<a href="https://akilar.top/posts/8f31c3d0/">https://akilar.top/posts/8f31c3d0/</a></p><h2 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h2><p>其实在主题配置中也有许多的设置可以优化访问速度</p><h3 id="instantpage（预加载）"><a href="#instantpage（预加载）" class="headerlink" title="instantpage（预加载）"></a>instantpage（预加载）</h3><p>找到instantpage将其开启</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>当鼠标悬停到链接上超过 65 毫秒时，Instantpage 会对该链接进行预加载，可以提升访问速度。</p></blockquote><h3 id="默认图片更改"><a href="#默认图片更改" class="headerlink" title="默认图片更改"></a>默认图片更改</h3><p>找到default_top_img将其改为自用图片</p><blockquote><p>图片记得按照步骤2进行压缩</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_top_img:</span> <span class="string">这里填写你的图片链接</span></span><br></pre></td></tr></table></figure><h3 id="Pangu-文字格式优化"><a href="#Pangu-文字格式优化" class="headerlink" title="Pangu(文字格式优化)"></a>Pangu(文字格式优化)</h3><p>找到pangu将其开启</p><blockquote><p>它会自动替你在网页中所有的中文字和半形的英文、数字、符号之间插入空白。</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure><h3 id="取消文章顶部图"><a href="#取消文章顶部图" class="headerlink" title="取消文章顶部图"></a>取消文章顶部图</h3><p>找到disable_top_img将其开启</p><blockquote><p>可以使文章页加载速度提升</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">disable_top_img:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="Pjax"><a href="#Pjax" class="headerlink" title="Pjax"></a>Pjax</h3><blockquote><p>通过 ajax 和 pushState 技术提供了极速的（无刷新 ajax 加载）浏览体验，并且保持了真实的地址、网页标题，浏览器的后退（前进）按钮也可以正常使用</p></blockquote><p>开启只需要在 _config.butterfly.yml 中 开启 pjax</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="comment"># - xxxx</span></span><br><span class="line">    <span class="comment"># - xxxx</span></span><br></pre></td></tr></table></figure><h1 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h1><p>恭喜，你的博客已经完成了优化，可这并不代表结束，<strong>我的这篇文章仅仅针对自己的博客需求</strong>，如果你想获得更好的体验请自行谷歌教程</p>]]></content>
    
    
      
      
    <summary type="html">&lt;details class=&quot;folding-tag&quot; &gt;&lt;summary&gt; 更新记录 &lt;/summary&gt;
              &lt;div class=&#39;content&#39;&gt;
              &lt;p&gt;在2022.1jsd出了一些事，导致速度大不如前（甚至起到反效</summary>
      
    
    
    
    <category term="教程" scheme="https://onexuezha.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="hexo优化" scheme="https://onexuezha.github.io/tags/hexo%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
</feed>
